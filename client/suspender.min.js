var suspender=window.suspender=function(){function n(n){function t(n){for(var t=0;t<this.handlers.error.length;t++)try{this.handlers.error[t].call(this,n)}catch(i){}}this.socket=n;this.handlers={data:[],error:[],close:[]};this.handle={};this.handleOnce={};this.socket.onmessage=function(n){for(var i=n.data,t=0;t<this.handlers.data.length;t++)try{this.handlers.data[t].call(this,i)}catch(r){}}.bind(this);this.socket.onerror=function(){for(var n=0;n<this.handlers.error.length;n++)try{this.handlers.error[n].call(this,new Error("Socket encountered an error"))}catch(t){}}.bind(this);this.socket.onclose=function(n){for(var t=0;t<this.handlers.error.length;t++)try{this.handlers.close[t].call(this,n)}catch(i){}}.bind(this);this.handlers.data.push(function(n){var i,u,e;try{if(i=JSON.parse(n),u=null,u=this.handleOnce[i.c],u?delete this.handleOnce[i.c]:u=r(this.handle,i.c),u||t(new Error("No handler for "+i.c)),i.r&&i.a.push(function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(i.r);this.call.apply(this,n)}.bind(this)),u.length<i.a.length&&typeof i.a[i.a.length-1]=="function"){e=i.a.pop();try{e(u.apply(this,i.a))}catch(f){t(f)}}else try{u.apply(this,i.a)}catch(f){t(f)}}catch(f){t(f)}}.bind(this))}function i(n){for(var r=[],i=0;i<n;i++)r[i]=t[Math.floor(Math.random()*t.length)];return r.join("")}function r(n,t){Array.isArray(t)||(t=t.split("."));for(var i=t.shift();n.hasOwnProperty(i);)n=n[i],i=t.shift();return t.length?null:n}function u(n,t,i){Array.isArray(t)||(t=t.split("."));for(var r=t.shift();t.length;)n[r]=n[r]||{},n=n[r],r=t.shift();n[r]=i}n.prototype.call=n.prototype.emit=function(n,t){if(t=Array.prototype.slice.call(arguments,0),n=t.shift(),typeof t[t.length-1]=="function"){var u=t.pop(),r=i(16);this.once(r,u);this.socket.send(JSON.stringify({c:n,a:t,r:r}))}else this.socket.send(JSON.stringify({c:n,a:t}))};n.prototype.on=function(n,t){n=="data"||n=="error"||n=="close"?this.handlers[n].push(t):u(this.handle,n,t)};n.prototype.once=function(n,t){this.handleOnce[n]=t};var t="abcdef0123456789";return n}();
/*
//# sourceMappingURL=suspender.min.js.map
*/